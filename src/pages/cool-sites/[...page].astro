---
import type { Page, PaginateFunction } from 'astro'
import type { CoolSiteType } from '../../schemas/coolSites'
import { getParsedCoolSites } from '../../utils/getParsedCoolSites'
import CoolSitesPage from './_CoolSitesPage.astro'

export async function getStaticPaths({
	paginate,
}: {
	paginate: PaginateFunction
}) {
	const parsedCoolSites = await getParsedCoolSites()
	return paginate(parsedCoolSites, {
		pageSize: 48,
	}).map((page) => ({
		...page,
		props: {
			...page.props,
			allCoolSites: parsedCoolSites,
		},
	}))
}

export interface Props {
	page: Page
	allCoolSites: CoolSiteType[]
}

const { page, allCoolSites } = Astro.props
---

<CoolSitesPage page={page} allCoolSites={allCoolSites} />
