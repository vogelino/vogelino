---
import CoolSitesGrid from '../../components/CoolSitesGrid'
import Layout from '../../layouts/Layout.astro'
import StuffLayout from '../../layouts/StuffLayout.astro'
import type { CoolSiteType } from '../../schemas/coolSites'

export interface Props {
	allCoolSites: CoolSiteType[]
	disableGrid?: true
	initialPage?: number
}

const { disableGrid = false, initialPage = 1, allCoolSites = [] } = Astro.props

const initialLeftSidebarOpen = `${Astro.url.searchParams.get('leftSidebarOpen')}` === 'true'
const initialTags = Astro.url.searchParams.get('tags')?.split(',') || []
---

<Layout
  title="List of cool site I like"
  slug="cool-sites"
  disableScroll={disableGrid}
>
  <slot />
  <StuffLayout showLeftSidebar initialLeftSidebarOpen={initialLeftSidebarOpen}>
    
    <CoolSitesGrid
      client:load={!disableGrid}
      disableGrid={disableGrid}
      allCoolSites={allCoolSites}
      referrerUrl={Astro.site?.href?.toString() ?? ""}
      selectedId={Astro.params.id}
      initialPage={initialPage}
      initialLeftSidebarOpen={initialLeftSidebarOpen}
      initialTags={initialTags}
    />
  </StuffLayout>
</Layout>
